@using BellaHair.Ports.Treatments
@using BellaHair.Presentation.WebUI.Components.Shared
@using System.Threading.Tasks

<!-- Mikkel Klitgaard -->


			<div class="treatment-card">

					<BinDeleteButton OnClick="HandleOnDeleteClick" />

				<div class="treatment-avatar">
						<TreatmentIcon Class="treatment-icon"/>
					</div>

					<div class="treatment-details">

						<h6>@Treatment.Name</h6>

						<div class="offered-by-wrapper">

							<button class="btn-offer" @onclick="@HandleOfferedByClick">
								Udbydes af
								</button>
						
						</div>

						<hr class="treatment-line"/>

						<div class="price-duration-wrapper">

						<div class="treatment-pd-details">

								<PriceIcon Class="treatment-price-icon"/>
								@Treatment.Price.ToString("C")

							</div>

						<div class="treatment-pd-details">

								<DurationIcon Class="treatment-duration-icon"/>
								@Treatment.DurationMinutes min

							</div>
						</div>
					</div>
				</div>


@code {
	[Parameter, EditorRequired]
	public required TreatmentViewModel Treatment { get; set; }

	[Parameter, EditorRequired]
	public required EventCallback OnDelete { get; set; }

	[Parameter, EditorRequired]
	public required EventCallback<Guid> OnShowOfferedBy { get; set; }


	private void HandleOnDeleteClick()
	{
		Console.WriteLine("Jalapeños");
		// TODO: Implementer logik
		OnDelete.InvokeAsync();
	}


	private async Task HandleOfferedByClick()
	{
		await OnShowOfferedBy.InvokeAsync(Treatment.Id);
	}



}
